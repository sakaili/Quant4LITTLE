# å¢å¼ºç‰ˆè‡ªåŠ¨äº¤æ˜“ç³»ç»Ÿ - å®Œæ•´è¯´æ˜

## ğŸ¯ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒåŠŸèƒ½
1. **æ¯å°æ—¶è¿è¡ŒPaper Trading** - ç”Ÿæˆåšç©ºä¿¡å·
2. **è‡ªåŠ¨æ”¶é›†ä¿¡å·æ•°æ®** - è¿½è¸ªä¿¡å·åç»­è¡¨ç°
3. **åŠ¨æ€æ›´æ–°è®­ç»ƒæ•°æ®** - ç´¯ç§¯çœŸå®äº¤æ˜“æ ·æœ¬
4. **è‡ªåŠ¨é‡æ–°è®­ç»ƒæ¨¡å‹** - åŸºäºæ–°æ•°æ®æŒç»­ä¼˜åŒ–
5. **å®æ—¶ç»Ÿè®¡ç›‘æ§** - å¯è§†åŒ–ç­–ç•¥è¡¨ç°

---

## ğŸ“Š å·¥ä½œæµç¨‹

```
æ¯å°æ—¶è§¦å‘ (00:00, 01:00, 02:00 ...)
    â†“
[æ­¥éª¤1] æ›´æ–°å¸æ± æ•°æ®ï¼ˆä»…8ç‚¹ï¼‰
    - è·å–å200åä½æµåŠ¨æ€§å¸ç§
    - ä¸‹è½½æœ€æ–°Kçº¿æ•°æ®
    â†“
[æ­¥éª¤2] è¿è¡ŒPaper Trading
    - ç­–ç•¥ç­›é€‰å€™é€‰æ ‡çš„
    - æ¨¡å‹æ‰“åˆ†æ’åº
    - ç”ŸæˆSHORTä¿¡å·ï¼ˆæœ€å¤š20ä¸ªï¼‰
    â†“
[æ­¥éª¤3] æ”¶é›†ä¿¡å·ç»Ÿè®¡
    - ç»Ÿè®¡æ€»ä¿¡å·æ•°
    - åˆ†ææ¨¡å‹åˆ†ç±»åˆ†å¸ƒ
    - ä¿å­˜æ¯å°æ—¶ç»Ÿè®¡
    â†“
[æ­¥éª¤4] è¿½è¸ªä¿¡å·è¡¨ç°
    - æ£€æŸ¥5å¤©å‰çš„ä¿¡å·
    - è®¡ç®—å®é™…ç›ˆäºï¼ˆåšç©ºæ”¶ç›Šç‡ï¼‰
    - æ·»åŠ åˆ°è®­ç»ƒæ•°æ®é›†
    â†“
[æ­¥éª¤5] æ£€æŸ¥å¹¶é‡æ–°è®­ç»ƒæ¨¡å‹
    - åˆ¤æ–­æ˜¯å¦éœ€è¦é‡è®­ï¼š
      * æ¡ä»¶1: è¶…è¿‡24å°æ—¶æœªè®­ç»ƒ
      * æ¡ä»¶2: æ–°å¢æ ·æœ¬â‰¥50ä¸ª
    - è‡ªåŠ¨å¯åŠ¨æ¨¡å‹è®­ç»ƒ
    - ä½¿ç”¨æœ€æ–°æ•°æ®æ›´æ–°æ¨¡å‹
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

### æ–°å¢æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| [scripts/hourly_trading_enhanced.py](scripts/hourly_trading_enhanced.py) | **å¢å¼ºç‰ˆä¸»ç¨‹åº**ï¼ˆå«æ¨¡å‹è‡ªåŠ¨æ›´æ–°ï¼‰ |
| [scripts/dashboard.py](scripts/dashboard.py) | ç»Ÿè®¡ä»ªè¡¨æ¿ï¼ˆæŸ¥çœ‹å®æ—¶æ•°æ®ï¼‰ |
| data/statistics/stats_YYYYMM.csv | æ¯å°æ—¶ç»Ÿè®¡æ•°æ® |
| data/backtest_trades.csv | è®­ç»ƒæ•°æ®ï¼ˆä¿¡å·è¿½è¸ªç»“æœï¼‰ |

### æ›´æ–°æ–‡ä»¶

| æ–‡ä»¶ | æ”¹åŠ¨ |
|------|------|
| [run_hourly_trading.bat](run_hourly_trading.bat) | è°ƒç”¨å¢å¼ºç‰ˆè„šæœ¬ |
| [run_hourly_trading.sh](run_hourly_trading.sh) | è°ƒç”¨å¢å¼ºç‰ˆè„šæœ¬ |

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### Windowsç³»ç»Ÿ

```powershell
# åˆ›å»ºæ¯å°æ—¶ä»»åŠ¡ï¼ˆä½¿ç”¨å¢å¼ºç‰ˆï¼‰
schtasks /create /tn "Quant4Littleè‡ªåŠ¨äº¤æ˜“å¢å¼ºç‰ˆ" `
  /tr "F:\2025\Quant4Little\run_hourly_trading.bat" `
  /sc hourly /st 00:00

# ç«‹å³æµ‹è¯•
schtasks /run /tn "Quant4Littleè‡ªåŠ¨äº¤æ˜“å¢å¼ºç‰ˆ"

# æŸ¥çœ‹æ—¥å¿—
Get-Content logs\hourly_trading_202511.log -Tail 50 -Wait
```

### Linuxç³»ç»Ÿ

```bash
# æ·»åŠ crontab
crontab -e
# æ·»åŠ : 0 * * * * /path/to/Quant4Little/run_hourly_trading.sh

# ç«‹å³æµ‹è¯•
./run_hourly_trading.sh

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/hourly_trading_202511.log
```

---

## ğŸ“Š æŸ¥çœ‹ç»Ÿè®¡ä»ªè¡¨æ¿

```bash
# éšæ—¶æŸ¥çœ‹å®æ—¶ç»Ÿè®¡
python scripts/dashboard.py
```

**æ˜¾ç¤ºå†…å®¹**ï¼š
- ğŸ“Š ä¿¡å·ç»Ÿè®¡ï¼ˆæ€»æ•°ã€æœ€è¿‘7å¤©ã€æ¨¡å‹åˆ†ç±»ï¼‰
- ğŸ“š è®­ç»ƒæ•°æ®ï¼ˆäº¤æ˜“è®°å½•ã€æ”¶ç›Šåˆ†å¸ƒã€èƒœç‡ï¼‰
- ğŸ¤– æ¨¡å‹ä¿¡æ¯ï¼ˆè®­ç»ƒæ—¶é—´ã€æ ·æœ¬æ•°ã€å‡†ç¡®ç‡ï¼‰
- â° æ¯å°æ—¶è¿è¡Œç»Ÿè®¡
- ğŸ’° å¸æ± ä¿¡æ¯ï¼ˆæ•°æ®æ–‡ä»¶æ•°é‡ï¼‰

---

## ğŸ”„ è‡ªåŠ¨åŒ–æµç¨‹è¯¦è§£

### 1. ä¿¡å·ç”Ÿæˆï¼ˆæ¯å°æ—¶ï¼‰

```python
# scripts/hourly_trading_enhanced.py

def run_paper_trading():
    """
    è¿è¡ŒPaper Tradingç”Ÿæˆä¿¡å·
    è¾“å‡º: data/paper_trading/signals_YYYYMMDD.csv
    """
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```csv
symbol,close,model_score,model_class,signal_type
DEXE_USDT_USDT_1d,7.321,0.246,1,SHORT
ORCA_USDT_USDT_1d,1.552,0.003,1,SHORT
```

### 2. ä¿¡å·è¿½è¸ªï¼ˆæ¯å°æ—¶ï¼‰

```python
def check_and_collect_training_data(stats):
    """
    è¿½è¸ª5å¤©å‰çš„ä¿¡å·è¡¨ç°
    è®¡ç®—å®é™…ç›ˆäºï¼ˆåšç©ºæ”¶ç›Šç‡ï¼‰
    æ·»åŠ åˆ°è®­ç»ƒæ•°æ®é›†
    """
```

**è¿½è¸ªé€»è¾‘**ï¼š
```python
# 5å¤©å‰çš„ä¿¡å·
signal_date = 2025-11-18
entry_price = 7.321

# 5å¤©åçš„ä»·æ ¼
exit_date = 2025-11-23
exit_price = 6.500

# åšç©ºæ”¶ç›Š = (å…¥åœºä»· - å‡ºåœºä»·) / å…¥åœºä»·
pnl_pct = (7.321 - 6.500) / 7.321 = 11.2%
```

**è¾“å‡ºåˆ°** `data/backtest_trades.csv`:
```csv
symbol,entry_date,entry_price,exit_date,exit_price,pnl_pct,signal_type,model_class
DEXE_USDT_USDT_1d,2025-11-18,7.321,2025-11-23,6.500,0.112,SHORT,1
```

### 3. æ¨¡å‹é‡è®­ï¼ˆæ¡ä»¶è§¦å‘ï¼‰

```python
def should_retrain_model(stats):
    """
    åˆ¤æ–­æ˜¯å¦éœ€è¦é‡è®­æ¨¡å‹

    æ¡ä»¶1: è¶…è¿‡24å°æ—¶æœªè®­ç»ƒ
    æ¡ä»¶2: æ–°å¢æ ·æœ¬â‰¥50ä¸ª
    """
```

**é‡è®­è§¦å‘ç¤ºä¾‹**ï¼š
```
[å½“å‰çŠ¶æ€]
- ä¸Šæ¬¡è®­ç»ƒ: 2025-11-22 08:00
- è·ä»Š: 26å°æ—¶ âœ“ è§¦å‘æ¡ä»¶1
- è®­ç»ƒæ ·æœ¬: 88ä¸ª
- å½“å‰æ ·æœ¬: 145ä¸ª
- æ–°å¢: 57ä¸ª âœ“ è§¦å‘æ¡ä»¶2

[æ‰§è¡Œ]
â†’ å¯åŠ¨æ¨¡å‹è®­ç»ƒ
â†’ ä½¿ç”¨145ä¸ªæ ·æœ¬
â†’ è®­ç»ƒ30è½®
â†’ ä¿å­˜æ–°æ¨¡å‹
```

---

## ğŸ“ˆ æ•°æ®ç´¯ç§¯è¿‡ç¨‹

### ç¬¬1å¤© (2025-11-23)
```
09:00 - ç”Ÿæˆ5ä¸ªSHORTä¿¡å·
10:00 - ç”Ÿæˆ3ä¸ªSHORTä¿¡å·
...
23:00 - ç”Ÿæˆ4ä¸ªSHORTä¿¡å·

ç´¯è®¡: å½“æ—¥æ–°å¢ 60ä¸ªä¿¡å·
è®­ç»ƒæ•°æ®: 88ä¸ªæ ·æœ¬ï¼ˆæ—§æ•°æ®ï¼‰
```

### ç¬¬5å¤© (2025-11-28)
```
[è¿½è¸ªç¬¬1å¤©çš„ä¿¡å·]
- æ£€æŸ¥60ä¸ªä¿¡å·çš„5å¤©åè¡¨ç°
- è®¡ç®—æ¯ä¸ªä¿¡å·çš„å®é™…ç›ˆäº
- æ–°å¢60æ¡è®­ç»ƒè®°å½•

ç´¯è®¡ä¿¡å·: 300ä¸ª
è®­ç»ƒæ•°æ®: 148ä¸ªæ ·æœ¬ï¼ˆ88æ—§ + 60æ–°ï¼‰

[æ¨¡å‹é‡è®­]
- æ–°å¢æ ·æœ¬: 60 â‰¥ 50 âœ“
- å¯åŠ¨é‡æ–°è®­ç»ƒ
- å‡†ç¡®ç‡æå‡: 28.6% â†’ 35.2%
```

### ç¬¬30å¤© (2025-12-23)
```
ç´¯è®¡ä¿¡å·: 1800ä¸ª
è®­ç»ƒæ•°æ®: 1088ä¸ªæ ·æœ¬
æ¨¡å‹ç‰ˆæœ¬: v5
å‡†ç¡®ç‡: 42.5%
```

---

## ğŸ¯ æ¨¡å‹æŒç»­ä¼˜åŒ–

### åˆå§‹é˜¶æ®µï¼ˆç¬¬1-7å¤©ï¼‰
- ä½¿ç”¨88ä¸ªå†å²æ ·æœ¬
- å‡†ç¡®ç‡: ~28%
- æ¯å°æ—¶ç”Ÿæˆ2-5ä¸ªä¿¡å·

### æˆé•¿é˜¶æ®µï¼ˆç¬¬8-30å¤©ï¼‰
- ç´¯ç§¯300+æ–°æ ·æœ¬
- å‡†ç¡®ç‡æå‡åˆ°35-40%
- æ¯å‘¨é‡è®­1-2æ¬¡

### æˆç†Ÿé˜¶æ®µï¼ˆ30å¤©åï¼‰
- ç´¯ç§¯1000+æ ·æœ¬
- å‡†ç¡®ç‡ç¨³å®šåœ¨40-45%
- æŒç»­ä¼˜åŒ–é€‰å¸èƒ½åŠ›

---

## ğŸ“Š ç›‘æ§ä¸åˆ†æ

### 1. å®æ—¶ç›‘æ§

```bash
# æŸ¥çœ‹ä»Šæ—¥è¿è¡Œæ—¥å¿—
tail -f logs/hourly_trading_202511.log

# æŸ¥çœ‹ç»Ÿè®¡ä»ªè¡¨æ¿
python scripts/dashboard.py
```

### 2. æ€§èƒ½åˆ†æ

```python
# æŸ¥çœ‹è®­ç»ƒæ•°æ®
import pandas as pd
trades = pd.read_csv('data/backtest_trades.csv')

# æŒ‰æ¨¡å‹åˆ†ç±»åˆ†æ
print(trades.groupby('model_class')['pnl_pct'].mean())

# Class 0: -3.2%ï¼ˆå·®ï¼Œåº”é¿å…ï¼‰
# Class 1:  2.5%ï¼ˆä¸­ç­‰ï¼‰
# Class 2:  8.7%ï¼ˆä¼˜è´¨ï¼‰âœ“
```

### 3. ä¿¡å·è´¨é‡è¯„ä¼°

```python
# æŸ¥çœ‹æœ€è¿‘7å¤©ä¿¡å·è¡¨ç°
recent = trades[trades['entry_date'] >= '2025-11-16']

print(f"èƒœç‡: {(recent['pnl_pct'] > 0).sum() / len(recent):.1%}")
print(f"å¹³å‡æ”¶ç›Š: {recent['pnl_pct'].mean():.2%}")
```

---

## âš™ï¸ é…ç½®è°ƒæ•´

### è°ƒæ•´é‡è®­é¢‘ç‡

ç¼–è¾‘ `scripts/hourly_trading_enhanced.py`:

```python
def should_retrain_model(stats):
    # ä¿®æ”¹è§¦å‘æ¡ä»¶

    # æ›´é¢‘ç¹ï¼ˆ12å°æ—¶æˆ–30ä¸ªæ–°æ ·æœ¬ï¼‰
    if hours_since_training >= 12 or new_samples >= 30:
        return True

    # æ›´ä¿å®ˆï¼ˆ48å°æ—¶æˆ–100ä¸ªæ–°æ ·æœ¬ï¼‰
    if hours_since_training >= 48 or new_samples >= 100:
        return True
```

### è°ƒæ•´è¿½è¸ªå¤©æ•°

```python
def check_and_collect_training_data(stats):
    # æ”¹ä¸º3å¤©åè¿½è¸ªï¼ˆæ›´å¿«åé¦ˆï¼‰
    cutoff_date = datetime.now().date() - timedelta(days=3)

    # æˆ–7å¤©åè¿½è¸ªï¼ˆæ›´é•¿å‘¨æœŸï¼‰
    cutoff_date = datetime.now().date() - timedelta(days=7)
```

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: æ¨¡å‹ä¸€ç›´ä¸é‡è®­ï¼Ÿ

**æ£€æŸ¥**:
```bash
# æŸ¥çœ‹æ—¥å¿—
grep "æ£€æŸ¥æ¨¡å‹è®­ç»ƒ" logs/hourly_trading_202511.log

# æŸ¥çœ‹è®­ç»ƒæ•°æ®æ•°é‡
python -c "import pandas as pd; print(len(pd.read_csv('data/backtest_trades.csv')))"
```

**å¯èƒ½åŸå› **:
- è®­ç»ƒæ•°æ®ä¸è¶³ï¼ˆ<100ä¸ªæ ·æœ¬ï¼‰
- æœªè¾¾åˆ°é‡è®­æ¡ä»¶ï¼ˆ<24å°æ—¶ä¸”æ–°æ ·æœ¬<50ï¼‰

### Q2: è®­ç»ƒæ•°æ®ä¸ºç©ºï¼Ÿ

**åŸå› **: éœ€è¦ç­‰å¾…5å¤©åæ‰èƒ½è¿½è¸ªä¿¡å·è¡¨ç°

**è§£å†³**:
- ç»§ç»­è¿è¡Œï¼Œ5å¤©åè‡ªåŠ¨å¼€å§‹ç´¯ç§¯
- æˆ–æ‰‹åŠ¨æ·»åŠ å†å²æ•°æ®åˆ° `data/backtest_trades.csv`

### Q3: å¦‚ä½•æ‰‹åŠ¨è§¦å‘é‡è®­ï¼Ÿ

```bash
# ç›´æ¥è¿è¡Œè®­ç»ƒè„šæœ¬
python -m scripts.modeling.train_ranker \
  --candidates-dir data/daily_scans \
  --backtest-csv data/backtest_trades.csv \
  --daily-dir data/daily_klines \
  --hourly-dir data/hourly_klines \
  --output-dir models \
  --epochs 30
```

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### ç¬¬1å‘¨
- âœ“ ç³»ç»Ÿç¨³å®šè¿è¡Œ
- âœ“ æ¯å°æ—¶ç”Ÿæˆ2-5ä¸ªä¿¡å·
- âœ“ å¼€å§‹ç´¯ç§¯è®­ç»ƒæ•°æ®
- âŠ˜ æ¨¡å‹æš‚æœªé‡è®­ï¼ˆæ•°æ®ä¸è¶³ï¼‰

### ç¬¬2å‘¨
- âœ“ ç´¯ç§¯60-80ä¸ªæ–°æ ·æœ¬
- âœ“ é¦–æ¬¡è‡ªåŠ¨é‡è®­
- âœ“ å‡†ç¡®ç‡æå‡3-5%
- âœ“ é€‰å¸è´¨é‡æ”¹å–„

### ç¬¬1ä¸ªæœˆ
- âœ“ ç´¯ç§¯300+æ ·æœ¬
- âœ“ é‡è®­5-7æ¬¡
- âœ“ å‡†ç¡®ç‡æå‡10-15%
- âœ“ ç­–ç•¥æ€§èƒ½ç¨³å®š

---

## ğŸ‰ æ€»ç»“

è¿™ä¸ªå¢å¼ºç‰ˆç³»ç»Ÿå®ç°äº†**å®Œå…¨è‡ªåŠ¨åŒ–çš„ç­–ç•¥ä¼˜åŒ–å¾ªç¯**ï¼š

```
ç”Ÿæˆä¿¡å· â†’ è¿½è¸ªè¡¨ç° â†’ ç´¯ç§¯æ•°æ® â†’ é‡è®­æ¨¡å‹ â†’ æå‡å‡†ç¡®ç‡ â†’ æ›´å¥½çš„ä¿¡å·
    â†‘                                                            â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æŒç»­ä¼˜åŒ–å¾ªç¯ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

åªéœ€è®¾ç½®ä¸€æ¬¡å®šæ—¶ä»»åŠ¡ï¼Œç³»ç»Ÿå°±ä¼šï¼š
- ğŸ“Š æ¯å°æ—¶ç”Ÿæˆäº¤æ˜“ä¿¡å·
- ğŸ“ˆ è‡ªåŠ¨è¿½è¸ªä¿¡å·è¡¨ç°
- ğŸ¤– åŠ¨æ€æ›´æ–°æ¨¡å‹å‚æ•°
- ğŸ“‰ æŒç»­ä¼˜åŒ–ç­–ç•¥æ€§èƒ½

**å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œæ— éœ€äººå·¥å¹²é¢„ï¼**

---

æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ:
- [HOURLY_TRADING_SETUP.md](HOURLY_TRADING_SETUP.md) - åŸºç¡€ç‰ˆè®¾ç½®æŒ‡å—
- [STRATEGY_CONFIG_SUMMARY.md](STRATEGY_CONFIG_SUMMARY.md) - ç­–ç•¥é…ç½®æ€»ç»“
